{"jobDefs":[{"version":"0.0","name":"Init Build Pipeline Demo","maxInstances":1,"pauseOnJobFail":false,"runtimeVars":{"GIT_PASSWORD":"*","instances":"*","GIT_URL":"*","GIT_USERNAME":"*","GIT_REPO_NAME":"*"},"schedules":[],"taskDefs":[{"target":4,"name":"Duplicate git repo","requiredTags":{"terraform":"true"},"fromRoutes":[],"toRoutes":[],"autoRestart":false,"stepDefs":[{"name":"run","order":1,"command":"","arguments":"","variables":{},"lambdaCodeSource":"script","lambdaRuntime":"","lambdaMemorySize":128,"lambdaTimeout":3,"lambdaFunctionHandler":"","lambdaAWSRegion":"","lambdaDependencies":"","lambdaZipfile":"","scriptName":"DuplicateGitRepo.sh"}],"exportWarnings":[]},{"target":4,"name":"Create eks cluster","requiredTags":{"terraform":"true"},"fromRoutes":[["Duplicate git repo",".*"]],"toRoutes":[],"autoRestart":false,"stepDefs":[{"name":"run","order":2,"command":"","arguments":"","variables":{},"lambdaCodeSource":"script","lambdaRuntime":"","lambdaMemorySize":128,"lambdaTimeout":3,"lambdaFunctionHandler":"","lambdaAWSRegion":"","lambdaDependencies":"","lambdaZipfile":"","scriptName":"CreateBuildPipelineDemoEKSCluster.sh"}],"exportWarnings":[]},{"target":32,"name":"Start ec2 instance","requiredTags":{},"fromRoutes":[],"toRoutes":[],"autoRestart":false,"stepDefs":[{"name":"AwsLambda","order":1,"command":"","arguments":"","variables":{},"lambdaCodeSource":"script","lambdaRuntime":"python2.7","lambdaMemorySize":128,"lambdaTimeout":15,"lambdaFunctionHandler":"","lambdaAWSRegion":"","lambdaDependencies":"boto3","lambdaZipfile":"","scriptName":"StartEC2Instance.py"}],"exportWarnings":[]}]},{"version":"0.0","name":"Build Stock Quotes Publisher","maxInstances":1,"pauseOnJobFail":false,"runtimeVars":{"docker_tag":"*"},"schedules":[],"taskDefs":[{"target":4,"name":"Deploy build environment","requiredTags":{"terraform":"true"},"fromRoutes":[],"toRoutes":[],"autoRestart":false,"stepDefs":[{"name":"run","order":1,"command":"","arguments":"","variables":{},"lambdaCodeSource":"script","lambdaRuntime":"","lambdaMemorySize":128,"lambdaTimeout":3,"lambdaFunctionHandler":"","lambdaAWSRegion":"","lambdaDependencies":"","lambdaZipfile":"","scriptName":"DeployBuildPipelineDemoBuildEnvironment.sh"}],"exportWarnings":[]},{"target":4,"name":"Run build","requiredTags":{"demo":"build-pipeline-1"},"fromRoutes":[["Deploy build environment",""]],"toRoutes":[],"autoRestart":false,"stepDefs":[{"name":"run","order":1,"command":"","arguments":"","variables":{"NODE_ENV":"test"},"lambdaCodeSource":"script","lambdaRuntime":"","lambdaMemorySize":128,"lambdaTimeout":3,"lambdaFunctionHandler":"","lambdaAWSRegion":"","lambdaDependencies":"","lambdaZipfile":"","scriptName":"BuildStockQuotePublisher.sh"}],"exportWarnings":[]},{"target":4,"name":"Deploy build","requiredTags":{"terraform":"true"},"fromRoutes":[["Run build","ok"]],"toRoutes":[],"autoRestart":false,"stepDefs":[{"name":"run","order":1,"command":"","arguments":"@sgg(\"docker_tag\")","variables":{},"lambdaCodeSource":"script","lambdaRuntime":"","lambdaMemorySize":128,"lambdaTimeout":3,"lambdaFunctionHandler":"","lambdaAWSRegion":"","lambdaDependencies":"","lambdaZipfile":"","scriptName":"DeployStockQuotePublisherDemo.sh"}],"exportWarnings":[]}]},{"version":"0.0","name":"Remove Build Pipeline Demo","maxInstances":1,"misFireGraceTime":null,"coalesce":null,"pauseOnJobFail":false,"runtimeVars":{"GIT_PASSWORD":"*","docker_tag":"*","instances":"*","GIT_URL":"*","GIT_USERNAME":"*","GIT_REPO_NAME":"*"},"schedules":[],"taskDefs":[{"target":4,"name":"Delete git repo","order":null,"requiredTags":{"ec2admin":"true"},"fromRoutes":[],"toRoutes":[],"autoRestart":false,"stepDefs":[{"name":"run","order":1,"command":"","arguments":"","variables":{},"lambdaCodeSource":"script","lambdaRuntime":"","lambdaMemorySize":128,"lambdaTimeout":3,"lambdaFunctionHandler":"","lambdaAWSRegion":"","lambdaDependencies":"","lambdaZipfile":"","scriptName":"DeleteGitRepo.sh"}],"exportWarnings":[]},{"target":4,"name":"Delete eks cluster","order":null,"requiredTags":{"terraform":"true"},"fromRoutes":[],"toRoutes":[],"autoRestart":false,"stepDefs":[{"name":"run","order":2,"command":"","arguments":"","variables":{},"lambdaCodeSource":"script","lambdaRuntime":"","lambdaMemorySize":128,"lambdaTimeout":3,"lambdaFunctionHandler":"","lambdaAWSRegion":"","lambdaDependencies":"","lambdaZipfile":"","scriptName":"RemoveBuildPipelineDemoEKSCluster"}],"exportWarnings":[]},{"target":32,"name":"Stop ec2 instance","order":null,"requiredTags":{},"fromRoutes":[["Delete eks cluster",".*"]],"toRoutes":[],"autoRestart":false,"stepDefs":[{"name":"AwsLambda","order":1,"command":"","arguments":"","variables":{},"lambdaCodeSource":"script","lambdaRuntime":"python2.7","lambdaMemorySize":128,"lambdaTimeout":30,"lambdaFunctionHandler":"","lambdaAWSRegion":"","lambdaDependencies":"","lambdaZipfile":"","scriptName":"StopEC2Instance.py"}],"exportWarnings":[]}]}],"scripts":[{"name":"DuplicateGitRepo.sh","scriptType":2,"code":"UkFORF9TVFJJTkc9JChvcGVuc3NsIHJhbmQgLWhleCA2KQplY2hvICJAc2dveyJuZXdfcmVwb19pZCI6IFwiJFJBTkRfU1RSSU5HXCJ9IgojIGVjaG8gJ0BzZ297XCJnaXRfcmVwb19pZFwiLCAiJFJBTkRfU1RSSU5HIn0nCmN1cmwgLUggJ0F1dGhvcml6YXRpb246IHRva2VuIEBzZ2coIkdJVF9QQVNTV09SRCIpJyAtLWRhdGEgIntcIm5hbWVcIjpcIkBzZ2coIkdJVF9SRVBPX05BTUUiKS0kUkFORF9TVFJJTkdcIiwgXCJwcml2YXRlXCI6IHRydWV9IiBodHRwczovL2FwaS5naXRodWIuY29tL3VzZXIvcmVwb3MKZ2l0IGNsb25lIC0tYmFyZSBodHRwczovL0BzZ2coR0lUX1VTRVJOQU1FKTpAc2dnKEdJVF9QQVNTV09SRClAQHNnZyhHSVRfVVJMKS9Ac2dnKEdJVF9SRVBPX05BTUUpLmdpdApjZCBzZy1kZW1vLWJ1aWxkcGlwZWxpbmUuZ2l0CmdpdCBwdXNoIC0tbWlycm9yICJodHRwczovL0BzZ2coIkdJVF9VU0VSTkFNRSIpOkBzZ2coIkdJVF9QQVNTV09SRCIpQEBzZ2coIkdJVF9VUkwiKS9Ac2dnKCJHSVRfUkVQT19OQU1FIiktJFJBTkRfU1RSSU5HLmdpdCI=","teamUsable":true,"teamEditable":false,"isActive":true},{"name":"CreateBuildPipelineDemoEKSCluster.sh","scriptType":2,"code":"Y2QgfgoKZ2l0IGNsb25lIGh0dHBzOi8vQHNnZygiU0dfR0lUX1NFQ1JFVCIpQGdpdGh1Yi5jb20vc2Fhc2dsdWUvc2ctZGVtby1idWlsZHBpcGVsaW5lLUBzZ2coIm5ld19yZXBvX2lkIikuZ2l0CgpjZCBzZy1kZW1vLWJ1aWxkcGlwZWxpbmUtQHNnZygibmV3X3JlcG9faWQiKS9kZXBsb3kvdGVycmFmb3JtL3Byb3Zpc2lvbi8KdGVycmFmb3JtIGluaXQKdGVycmFmb3JtIGFwcGx5IC1hdXRvLWFwcHJvdmUKCmNkIC4uL2RlcGxveS1wcm9kLwp0ZXJyYWZvcm0gaW5pdAp0ZXJyYWZvcm0gYXBwbHkgLXZhcj0iZW52aXJvbm1lbnQ9cHJvZCIgLXZhcj0ic3RvY2tfcHVibGlzaGVyX3ZlcnNpb249djAuMSIgLXZhcj0iZGVtb19pZD1Ac2dnKG5ld19yZXBvX2lkKSIgLWF1dG8tYXBwcm92ZQo=","teamUsable":true,"teamEditable":false,"isActive":true},{"name":"StartEC2Instance.py","scriptType":0,"code":"aW1wb3J0IGJvdG8zCgpyZWdpb24gPSAnQHNnZygiQVdTX1JFR0lPTiIpJwppbnN0YW5jZXMgPSAnQHNnZygiaW5zdGFuY2VzIiknLnNwbGl0KCcsJykKaW5zdGFuY2VzID0gbGlzdChtYXAobGFtYmRhIHg6IHguc3RyaXAoKSwgaW5zdGFuY2VzKSkKZWMyID0gYm90bzMuY2xpZW50KCdlYzInLCByZWdpb25fbmFtZT1yZWdpb24sIGF3c19hY2Nlc3Nfa2V5X2lkPSdAc2dnKCJBV1NfQUNDRVNTX0tFWV9JRCIpJywgYXdzX3NlY3JldF9hY2Nlc3Nfa2V5PSdAc2dnKCJBV1NfU0VDUkVUX0FDQ0VTU19LRVkiKScpCmVjMi5zdGFydF9pbnN0YW5jZXMoSW5zdGFuY2VJZHM9aW5zdGFuY2VzKQpwcmludCgnc3RhcnRlZCBpbnN0YW5jZXM6ICcgKyBzdHIoaW5zdGFuY2VzKSkK","teamUsable":true,"teamEditable":true,"isActive":true},{"name":"DeployBuildPipelineDemoBuildEnvironment.sh","scriptType":2,"code":"c2V0IC1lCgpyZXBvX25hbWU9J0BzZ2coInJlcG9fbmFtZSIpJwoKIyBTZXQgZGFzaCBhcyBkZWxpbWl0ZXIKSUZTPSctJwojUmVhZCB0aGUgc3BsaXQgd29yZHMgaW50byBhbiBhcnJheSBiYXNlZCBvbiBjb21tYSBkZWxpbWl0ZXIKcmVhZCAtYSBzdHJhcnIgPDw8ICIkcmVwb19uYW1lIgpsZW49JHsjc3RyYXJyW0BdfQpuZXdfcmVwb19pZD0ke3N0cmFyclskbGVuLTFdfQoKZWNobyAiQHNnb3snbmV3X3JlcG9faWQnOicke25ld19yZXBvX2lkfSd9IgoKY2Qgfi9zZy1kZW1vLWJ1aWxkcGlwZWxpbmUtJHtuZXdfcmVwb19pZH0vZGVwbG95L3RlcnJhZm9ybS9kZXBsb3ktdGVzdC8KdGVycmFmb3JtIGluaXQKdGVycmFmb3JtIGFwcGx5IC12YXI9InNnX2FnZW50X3ZlcnNpb249djAuMSIgLXZhcj0iZGVtb19pZD0ke25ld19yZXBvX2lkfSIgLWF1dG8tYXBwcm92ZQo=","teamUsable":true,"teamEditable":false,"isActive":true},{"name":"BuildStockQuotePublisher.sh","scriptType":2,"code":"c2V0IC1lCgpleHBvcnQgTk9ERV9DT05GSUdfRElSPS9zZy1kZW1vLWJ1aWxkcGlwZWxpbmUtQHNnZygibmV3X3JlcG9faWQiKS9jb25maWcvCmNkIC8KZ2l0IGNsb25lIGh0dHBzOi8vQHNnZygiU0dfR0lUX1NFQ1JFVCIpQGdpdGh1Yi5jb20vc2Fhc2dsdWUvc2ctZGVtby1idWlsZHBpcGVsaW5lLUBzZ2coIm5ld19yZXBvX2lkIikuZ2l0CmNkIHNnLWRlbW8tYnVpbGRwaXBlbGluZS1Ac2dnKCJuZXdfcmVwb19pZCIpCm5wbSBpIC0tdW5zYWZlLXBlcm0KCmVjaG8gIkBzZ297J3JvdXRlJzonb2snfSI=","teamUsable":true,"teamEditable":false,"isActive":true},{"name":"DeployStockQuotePublisherDemo.sh","scriptType":2,"code":"Y2Qgfi9zZy1kZW1vLWJ1aWxkcGlwZWxpbmUtQHNnZygibmV3X3JlcG9faWQiKS8KCmdpdCBwdWxsCgphd3MgZWNyIGdldC1sb2dpbi1wYXNzd29yZCAtLXJlZ2lvbiB1cy1lYXN0LTEgfCBkb2NrZXIgbG9naW4gLS11c2VybmFtZSBBV1MgLS1wYXNzd29yZC1zdGRpbiA5NDgwMzI1NjYyMzQuZGtyLmVjci51cy1lYXN0LTEuYW1hem9uYXdzLmNvbQoKc3VkbyBzZXJ2aWNlIGRvY2tlciBzdGFydAoKZG9ja2VyIGJ1aWxkIC1mIGRlcGxveS9kb2NrZXIvc3RvY2tfcXVvdGVfcHVibGlzaGVyL0RvY2tlcmZpbGUgLXQgc3RvY2tfcXVvdGVfcHVibGlzaGVyIC4KZG9ja2VyIHRhZyBzdG9ja19xdW90ZV9wdWJsaXNoZXIgOTQ4MDMyNTY2MjM0LmRrci5lY3IudXMtZWFzdC0xLmFtYXpvbmF3cy5jb20vc2dfZGVtb19zdG9ja19xdW90ZV9wdWJsaXNoZXI6JDEKZG9ja2VyIHB1c2ggOTQ4MDMyNTY2MjM0LmRrci5lY3IudXMtZWFzdC0xLmFtYXpvbmF3cy5jb20vc2dfZGVtb19zdG9ja19xdW90ZV9wdWJsaXNoZXI6JDEKZG9ja2VyIHRhZyBzdG9ja19xdW90ZV9wdWJsaXNoZXIgOTQ4MDMyNTY2MjM0LmRrci5lY3IudXMtZWFzdC0xLmFtYXpvbmF3cy5jb20vc2dfZGVtb19zdG9ja19xdW90ZV9wdWJsaXNoZXI6bGF0ZXN0CmRvY2tlciBwdXNoIDk0ODAzMjU2NjIzNC5ka3IuZWNyLnVzLWVhc3QtMS5hbWF6b25hd3MuY29tL3NnX2RlbW9fc3RvY2tfcXVvdGVfcHVibGlzaGVyOmxhdGVzdAoKY2QgZGVwbG95L3RlcnJhZm9ybS9kZXBsb3ktcHJvZC8KCnRlcnJhZm9ybSBhcHBseSAtdmFyPSJlbnZpcm9ubWVudD1wcm9kIiAtdmFyPSJzdG9ja19wdWJsaXNoZXJfdmVyc2lvbj1Ac2dnKCJkb2NrZXJfdGFnIikiIC12YXI9ImRlbW9faWQ9QHNnZyhuZXdfcmVwb19pZCkiIC1hdXRvLWFwcHJvdmUK","teamUsable":true,"teamEditable":false,"isActive":true},{"name":"DeleteGitRepo.sh","scriptType":2,"code":"Y3VybCAtWCBERUxFVEUgLUggJ0F1dGhvcml6YXRpb246IHRva2VuIEBzZ2coIkdJVF9QQVNTV09SRCIpJyBodHRwczovL2FwaS5naXRodWIuY29tL3JlcG9zL0BzZ2coR0lUX1VTRVJOQU1FKS9Ac2dnKCJHSVRfUkVQT19OQU1FIiktQHNnZygiZGVtb19pZCIpCg==","teamUsable":true,"teamEditable":false,"isActive":true},{"name":"RemoveBuildPipelineDemoEKSCluster","scriptType":2,"code":"Y2Qgfi9zZy1kZW1vLWJ1aWxkcGlwZWxpbmUtQHNnZygiZGVtb19pZCIpL2RlcGxveS90ZXJyYWZvcm0vZGVwbG95LXRlc3QvCnRlcnJhZm9ybSBkZXN0cm95IC12YXI9InNnX2FnZW50X3ZlcnNpb249djAuMSIgLXZhcj0iZGVtb19pZD1Ac2dnKGRlbW9faWQpIiAtYXV0by1hcHByb3ZlCgpjZCAuLi9kZXBsb3ktcHJvZC8KdGVycmFmb3JtIGRlc3Ryb3kgLXZhcj0iZW52aXJvbm1lbnQ9cHJvZCIgLXZhcj0ic3RvY2tfcHVibGlzaGVyX3ZlcnNpb249QHNnZygiZG9ja2VyX3RhZyIpIiAtdmFyPSJkZW1vX2lkPUBzZ2coZGVtb19pZCkiIC1hdXRvLWFwcHJvdmUKCmNkIC4uL3Byb3Zpc2lvbi8KdGVycmFmb3JtIGRlc3Ryb3kgLWF1dG8tYXBwcm92ZQoKY2QgfgpzdWRvIHJtIC1yZiBzZy1kZW1vLWJ1aWxkcGlwZWxpbmUtQHNnZygiZGVtb19pZCIpLw==","teamUsable":true,"teamEditable":false,"isActive":true},{"name":"StopEC2Instance.py","scriptType":0,"code":"aW1wb3J0IGJvdG8zCgpyZWdpb24gPSAnQHNnZygiQVdTX1JFR0lPTiIpJwppbnN0YW5jZXMgPSAnQHNnZygiaW5zdGFuY2VzIiknLnNwbGl0KCcsJykKaW5zdGFuY2VzID0gbGlzdChtYXAobGFtYmRhIHg6IHguc3RyaXAoKSwgaW5zdGFuY2VzKSkKZWMyID0gYm90bzMuY2xpZW50KCdlYzInLCByZWdpb25fbmFtZT1yZWdpb24sIGF3c19hY2Nlc3Nfa2V5X2lkPSdAc2dnKCJBV1NfQUNDRVNTX0tFWV9JRCIpJywgYXdzX3NlY3JldF9hY2Nlc3Nfa2V5PSdAc2dnKCJBV1NfU0VDUkVUX0FDQ0VTU19LRVkiKScpCmVjMi5zdG9wX2luc3RhbmNlcyhJbnN0YW5jZUlkcz1pbnN0YW5jZXMpCnByaW50KCdzdG9wcGVkIGluc3RhbmNlczogJyArIHN0cihpbnN0YW5jZXMpKQo=","teamUsable":true,"teamEditable":false,"isActive":true}]}